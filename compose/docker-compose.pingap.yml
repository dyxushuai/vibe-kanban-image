services:
  vibe-kanban:
    image: ${VIBE_KANBAN_IMAGE}:${VIBE_KANBAN_TAG}
    container_name: vibe-kanban
    environment:
      HOST: 0.0.0.0
      PORT: 8080
    expose:
      - "8080"
    volumes:
      - ./data:/data
      - ${PROJECTS_DIR:-~/code}:/repos:rw
    restart: unless-stopped

  pingap:
    image: vicanso/pingap:0.12.8-full
    container_name: vibe-kanban-pingap
    depends_on:
      - vibe-kanban
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./pingap/conf:/opt/pingap/conf:ro
      - ./pingap/certs:/opt/pingap/certs:ro
    environment:
      - PINGAP_CONF=/opt/pingap/conf
    command:
      - pingap
      - --autoreload
    restart: unless-stopped
